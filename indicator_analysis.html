<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Projet MOSAIC : Évaluation des indicateurs techniques</title>
<meta name="author" content="Roland Donat" />
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="https://fniessen.github.io/org-html-themes/src/readtheorg_theme/js/readtheorg.js"></script>
<link rel="stylesheet" type="text/css" href="https://edgemind-sas.github.io/visual-identity/official_docs/css/edgemind.css" />
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content" class="content">
<h1 class="title">Projet MOSAIC : Évaluation des indicateurs techniques</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table des matières</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#sec:strat_fi_intro">1. Problématique</a></li>
<li><a href="#org59a3f42">2. Formalisation</a></li>
<li><a href="#org2536988">3. Scores WER/PWER</a></li>
<li><a href="#org8635e5f">4. Scores AWER/PAWER</a></li>
<li><a href="#méthodologie-générale">5. Méthodologie d'évaluation</a></li>
<li><a href="#orge1f0978">6. Références</a></li>
</ul>
</div>
</div>

<div id="outline-container-sec:strat_fi_intro" class="outline-2">
<h2 id="sec:strat_fi_intro"><span class="section-number-2">1.</span> Problématique</h2>
<div class="outline-text-2" id="text-sec:strat_fi_intro">
<p>
Un des objectifs du projet MOSAIC est d'élaborer des politiques décisionnelles d'investissements
auto-adaptatives sur les marchés financiers, en particulier ceux des crytoactifs. Un investissement
de type achat/vente <sup><a id="fnr.1" class="footref" href="#fn.1" role="doc-backlink">1</a></sup> (en anglais <i>long position</i>) se caractérise par le fait
d'acheter une certaine quantité d'un actif afin de le vendre ultérieurement dans le but de faire une
plus-value.
</p>

<p>
En pratique, une politique d'investissement correspond donc à des règles d'achat et de vente d'un ou plusieurs
actifs sur une durée donnée. Ces règles peuvent être établies de différentes manières,
e.g. par expertise, suite à l'occurrence d'un ou plusieurs événements macroéconomiques, en fonction
de l'évolution de la cotation, etc. 
</p>

<p>
La stratégie que nous développons consiste à construire des règles d'achat et de vente
s'appuyant sur l'analyse prévisionnelle des rendements futurs espérés (à un horizon fixe) suite à
l'observation de divers indicateurs. Il est à noter que la notion d'indicateur peut se généraliser à la notion
d'information disponible au moment d'appliquer des règles d'achat/vente. Par ailleurs, afin de simplifier la
problématique, nous considérons que les indicateurs prennent leurs valeurs dans des domaines discrets et
finis. Par exemple, nous pourrions construire nos stratégies d'achat/vente à partir de l'observation
des deux indicateurs suivants :
</p>
<ul class="org-ul">
<li>couleur du chandelier précédent à valeurs dans \(\{\text{vert},\text{rouge}\}\) ;</li>
<li>signe du rendement sur les 3 périodes précédentes à valeurs dans \(\{+,-\}\).</li>
</ul>
<p>
Dans ce cas, nous pouvons construire un indicateur agrégé ayant six configurations \(\{(\text{vert}, +),
(\text{vert}, -), (\text{rouge}, +), (\text{rouge}, -)\}\) permettant de représenter toute l'information
observable à partir des deux indicateurs précédents.
</p>

<p>
La question de la pertinence des indicateurs utilisés dans une stratégie d'investissement se pose
alors naturellement. Dans le secteur de la finance, il est courant d'évaluer une stratégie d'investissement en
appliquant cette dernière sur des historiques de cotations (<i>back testing</i>) afin de simuler des
décisions d'achat/vente et calculer le rendement correspondant. Toutefois, ces techniques de <i>back
testing</i> s'avèrent relativement complexes à mettre en place et ne permettent pas de dissocier
l'apport des indicateurs utilisés par rapport à celui de la stratégie décisionnelle sur la
performance simulée.
</p>

<p>
Par conséquent, sans remettre en question le principe essentiel de <i>back testing</i>, le but est ici de
proposer une méthodologie ciblée sur l'évaluation quantitative des indicateurs. Pour ce faire, nous
considérons une stratégie d'investissement de référence qui sera utilisée pour évaluer tous les
indicateurs. Cette stratégie repose sur trois paramètres :
</p>
<ul class="org-ul">
<li>une borne de prise de profit (<i>take profit</i> en anglais) qui désigne le prix auquel nous
vendrons notre actif si celui-ci prend de la valeur ;</li>
<li>une borne de contrôle des pertes (<i>stop loss</i> en anglais) qui désigne le prix auquel nous
vendrons notre actif si celui-ci perd de la valeur ;</li>
<li>un horizon temporel au bout duquel nous vendrons l'actif au prix du marché.</li>
</ul>

<p>
Cette stratégie est illustrée dans sur la Figure <a href="#orgfbcacd9">1</a>.
</p>
</div>
</div>


<div id="outline-container-org59a3f42" class="outline-2">
<h2 id="org59a3f42"><span class="section-number-2">2.</span> Formalisation</h2>
<div class="outline-text-2" id="text-2">
<p>
Considérons tout d'abord les variables aléatoires suivantes :
</p>
<ul class="org-ul">
<li>\(R^{\text{c}}_{p+k}\) représentant le rendement de clôture entre les périodes \(p\) et \(p+k\) ;</li>
<li>\(R^{\text{h}}_{p+k}\) représentant le rendement du maximum entre les périodes \(p\) et \(p+k\) ;</li>
<li>\(R^{\text{l}}_{p+k}\) représentant le rendement du minimum entre à la période \(p\) et \(p+k\).</li>
</ul>

<p>
Nous désignons par \(\mathcal{S}\) la stratégie d'investissement de référence introduite dans la
Section <a href="#sec:strat_fi_intro">1</a>. Nous pouvons alors évaluer le rendement de cette 
stratégie suite à l'achat de l'actif étudié à la période \(p\). Ce rendement, noté
\(R^{\mathcal{S}}_{p+k}\), est une variable aléatoire définie comme suit : 
</p>
\begin{equation}
\label{eq:RSpk}
R^{\mathcal{S}}_{p+k} =
\begin{cases}
\rho^{+} & \text{si}~ R^{\text{h}}_{p+k} > \rho^{+}~\text{et}~ R^{\text{l}}_{p+k} > \rho^{-}, \\
\rho^{-} & \text{si}~ R^{\text{h}}_{p+k} < \rho^{+}~\text{et}~ R^{\text{l}}_{p+k} < \rho^{-}, \\
\frac{\rho^{+} + \rho^{-}}{2} & \text{si}~ R^{\text{h}}_{p+k} < \rho^{+}~\text{et}~ R^{\text{l}}_{p+k} > \rho^{-}, \\
R^{\text{c}}_{p+k} & \text{sinon},
\end{cases}
\end{equation}
<p>
où :
</p>
<ul class="org-ul">
<li>\(\rho^{+}, \rho^{-}\) sont les rendements de prise de profit et de contrôle des
pertes considérés dans la stratégie ;</li>
<li>Le cas \(R^{\text{h}}_{p+k} < \rho^{+}\) et \(R^{\text{l}}_{p+k} > \rho^{-}\) correspond à la
situation où les rendements du minimum et du maximum dépassent leur borne de vente respective au
cours de la même période \(p+k\). Dans ce cas, le rendement de la stratégie est fixé par convention
à la moyenne des seuils de vente.</li>
<li>\(k\) correspond au nombre de périodes au bout duquel l'actif sera vendu au rendement du
marché, i.e. \(R^{\text{c}}_{p+k}\), si les seuils de rendement \(\rho^{+}\) et
\(\rho^{-}\) ne sont pas atteint entre les périodes \(p\) et \(p+k\).</li>
</ul>

<p>
La Figure <a href="#orgfbcacd9">1</a> illustre les principe de la stratégie d'investissement décrite
précédemment. Dans cette exemple trois investissements (achats) sont effectuées. La durée maximum de
conservation de l'actif est de \(k=4\) périodes. La premier achat (à gauche) est revendu au cours de
la deuxième période car la valeur de l'actif a atteint le seuil de contrôle des pertes. Le second
achat (au milieu) est revendu au cours de la quatrième période car le seuil de prise de profit est
atteint. Enfin, le dernier achat (à droite) est revendu au prix de clôture de la quatrième période
car aucune des bornes de vente n'est atteinte sur les quatre période de l'investissement.
</p>


<div id="orgfbcacd9" class="figure">
<p><img src="./fig/fi_strat_ref.png" alt="fi_strat_ref.png" />
</p>
<p><span class="figure-number">Figure&nbsp;1&nbsp;: </span>Principes de la stratégie d'investissement de référence.</p>
</div>


<p>
Nous cherchons à présent à construire un score représentatif de la performance d'un ou
 plusieurs indicateurs dans la cadre de la stratégie d'investissement de référence
 précédente. Notons \(I_{p}\) la variable aléatoire représentant la configuration des indicateurs
 considérés (l'information disponible) à la période \(p\). La variable \(I_{p}\) est à valeurs dans
 l'ensemble fini des configurations possibles \(\mathcal{I} = \{i_{1}, \ldots, i_{M}\}\). En reprenant
 l'exemple de la Section <a href="#sec:strat_fi_intro">1</a>, \(M=6\) et \(\mathcal{I} = \{(\text{vert}, +),
 (\text{vert}, -), (\text{rouge}, +), (\text{rouge}, -)\}\). 
</p>

<p>
Le score de performance proposé consiste à évaluer l'espérance des rendements de la stratégie
\(\mathcal{S}\) entre la période \(p\) et \(p+k\) conditionnellement à chaque configuration d'indicateurs
observée à la période \(p-1\). Autrement dit, pour toute configuration d'indicateurs \(i_{m} \in
\mathcal{I}\), nous avons :
</p>

\begin{equation}
\label{orgd539f36}
\mathbb{E}[R^{\mathcal{S}}_{p+k} | i_{m}] = \pi^{+}_{i_{m}} \rho^{+}  + \pi^{-}_{i_{m}} \rho^{-}  + \pi^{\pm}_{i_{m}} \frac{\rho^{+} + \rho^{-}}{2} + \pi^{\text{c}}_{i_{m}} \overline{\rho}^{\text{c}}_{p+k | i_{m}},
\end{equation}
<p>
avec :
</p>
<ul class="org-ul">
<li>\(\pi^{+}_{i_{m}} = P(R^{\text{h}}_{p+k} > \rho^{+} ; R^{\text{l}}_{p+k} > \rho^{-} | i_{m})\) ;</li>
<li>\(\pi^{-}_{i_{m}} = P(R^{\text{h}}_{p+k} < \rho^{+} ; R^{\text{l}}_{p+k} < \rho^{-} | i_{m})\) ;</li>
<li>\(\pi^{\pm}_{i_{m}} = P(R^{\text{h}}_{p+k} < \rho^{+} ; R^{\text{l}}_{p+k} > \rho^{-} | i_{m})\) ;</li>
<li>\(\pi^{\text{c}}_{i_{m}} = 1 - \pi^{+}_{i_{m}} - \pi^{-}_{i_{m}} - \pi^{\pm}_{i_{m}}\) ;</li>
<li>\(\overline{\rho}^{\text{c}}_{p+k | i_{m}} = \mathbb{E}[R^{\text{c}}_{p+k} | i_{m}]\).</li>
</ul>
</div>
</div>


<div id="outline-container-org2536988" class="outline-2">
<h2 id="org2536988"><span class="section-number-2">3.</span> Scores WER/PWER</h2>
<div class="outline-text-2" id="text-3">
<p>
À partir de l'expression \eqref{orgd539f36}, nous construisons le score des rendements
extrêmes pondérés (<i>weighted extreme returns</i> en anglais) en fixant les seuils rendements \(\rho^{+}\)
et \(\rho^{-}\) comme suit :
</p>
<ul class="org-ul">
<li>\(\rho^{+} = \rho^{\text{h}}_{p + k,\alpha|i_{m}}\) le quantile de niveau \(\alpha\) du rendement du maximum à
l'horizon \(k\), i.e. \(\alpha = P(R^{\text{h}}_{p + k} \le \rho^{\text{h}}_{p + k,\alpha}|i_{m})\).</li>
<li>\(\rho^{-} = \rho^{\text{l}}_{p + k,1 - \beta|i_{m}}\) le quantile de niveau \(1 - \beta\) du rendement du minimum à
l'horizon \(k\), i.e. \(1 - \beta = P(R^{\text{l}}_{p + k} \le \rho^{\text{l}}_{p + k,1 - \beta}|i_{m})\).</li>
</ul>

<p>
pour chaque configuration d'indicateurs \(i_{m} \in \mathcal{I}\), le score des rendements extrêmes pondérés, noté WER, est défini par :
</p>
\begin{equation}
\label{org46e0a40}
\text{WER}(\alpha,\beta, k| i_{m}) = \rho^{\text{h}}_{p + k,\alpha|i_{m}} \pi^{+}_{i_{m}} + \rho^{\text{l}}_{p + k,1 - \beta|i_{m}} \pi^{-}_{i_{m}} + \pi^{\pm}_{i_{m}} \frac{\rho^{\text{h}}_{p + k,\alpha|i_{m}} + \rho^{\text{l}}_{p + k,1 - \beta|i_{m}}}{2} + \pi^{\text{c}} \overline{\rho}^{\text{c}}_{p+k | i_{m}}.
\end{equation}

<p>
L'expression précédente peut s'exprimer également sous la forme suivante :
</p>
\begin{equation}
\label{org4313f93}
\text{WER}(\alpha,\beta, k| i_{m}) = \left(1 - \alpha - \frac{\pi^{\pm}_{i_{m}}}{2}\right)\rho^{\text{h}}_{p + k,\alpha|i_{m}}  + \left(1 - \beta - \frac{\pi^{\pm}_{i_{m}}}{2}\right)\rho^{\text{l}}_{p + k,1 - \beta|i_{m}} + (\alpha + \beta + \pi^{\pm}_{i_{m}} - 1) \overline{\rho}^{\text{c}}_{p+k | i_{m}}.
\end{equation}
<p>
En remarquant que :
</p>
<ul class="org-ul">
<li>\(1 - \alpha = P(R^{\text{h}}_{p + k} > \rho^{\text{h}}_{p + k,\alpha}|i_{m}) =
  \pi^{+}_{i_{m}} + \pi^{\pm}_{i_{m}}\).</li>
<li>\(1 - \beta = P(R^{\text{l}}_{p + k} < \rho^{\text{l}}_{p + k,1 - \beta}|i_{m}) = \pi^{-}_{i_{m}} +
  \pi^{\pm}_{i_{m}}\).</li>
</ul>

<p>
<span class="underline">Interprétation du score :</span>
</p>
<ul class="org-ul">
<li>Le score WER est lié au rendement espéré résultant d'une prise
de profit sur le rendement du maximum au niveau \(\alpha\) et des pertes sur le rendement du minimum
au niveau \(\beta\).</li>
<li>Les niveaux \(\alpha\) et \(\beta\) contrôlent la prise de risque et les gains espérés de la stratégie
d'investissement (cf. Figure <a href="#org927f20c">2</a> pour une illustration des quantiles
\(\rho^{\text{h}}_{p + k,\alpha|i_{m}}\) et \(\rho^{\text{l}}_{p + k, 1-\beta|i_{m}}\).</li>
<li>Prendre \(\alpha\) proche de 0 signifie un seuil de prise de profit bas (donc un
gain espéré faible) mais avec probabilité élevée, i.e. on gagne peu mais
souvent. À l'inverse, prendre \(\alpha\) proche de 1 signifie un seuil de prise de profit haut (donc un
gain espéré important) mais avec probabilité faible, i.e. on gagne beaucoup mais
rarement.</li>
<li>Prendre \(\beta\) proche de 0 signifie un seuil de contrôle des pertes petit 
mais avec une probabilité élevée, i.e. on risque de perdre peu mais
souvent. À l'inverse, prendre \(\beta\) proche de 1 signifie un seuil de contrôle des pertes grand
mais avec une probabilité faible, i.e. on risque de perdre beaucoup mais 
rarement.</li>
</ul>


<div id="org927f20c" class="figure">
<p><img src="./fig/rho_hl_quant.png" alt="rho_hl_quant.png" />
</p>
<p><span class="figure-number">Figure&nbsp;2&nbsp;: </span>Représentation graphique des quantiles \(\rho^{\text{h}}_{p + k,\alpha}\) et \(\rho^{\text{l}}_{p + k,\alpha}\).</p>
</div>

<p>
Nous proposons enfin une version pénalisée du score WER, noté PWER, permettant de corriger le score
d'une configuration d'indicateurs avec le score obtenu sans indicateur.
</p>

<p>
Pour chaque configuration d'indicateurs \(i_{m} \in \mathcal{I}\), le score PWER est obtenu comme
suit :
</p>
\begin{equation}
\label{orgf1c2f5c}
\text{PWER}(\alpha,\beta, k| i_{m}) = \text{WER}(\alpha,\beta, k| i_{m}) - \text{WER}(\alpha,\beta, k| \varnothing)
\end{equation}
<p>
où \(\text{WER}(\alpha,\beta, k| \varnothing)\) est le score des rendements extrêmes de référence
<i>a priori</i>, i.e. sans tenir compte du conditionnement par rapport aux indicateurs observés.
</p>
</div>
</div>

<div id="outline-container-org8635e5f" class="outline-2">
<h2 id="org8635e5f"><span class="section-number-2">4.</span> Scores AWER/PAWER</h2>
<div class="outline-text-2" id="text-4">
<p>
Une variante du score WER \eqref{org46e0a40} consiste à lier les niveaux de risques \(\alpha\) et \(\beta\) de
sorte que \(\beta = 1 - \alpha\). En reprenant l'expression \eqref{org4313f93}, on définit le
score AWER (<i>asymetric weighted extreme returns</i> en anglais) pour chaque configuration d'indicateurs \(i_{m} \in
\mathcal{I}\) par :
</p>
\begin{equation}
\label{org6bb67f0}
\text{AWER}(\alpha, k| i_{m}) = \left(1 - \alpha - \frac{\pi^{\pm}_{i_{m}}}{2}\right)\rho^{\text{h}}_{p + k,\alpha|i_{m}}  + \left(\alpha - \frac{\pi^{\pm}_{i_{m}}}{2}\right)\rho^{\text{l}}_{p + k,\alpha|i_{m}} + \pi^{\pm}_{i_{m}} \overline{\rho}^{\text{c}}_{p+k | i_{m}}
\end{equation}

<p>
On en déduit le score asymétrique pénalisé, noté PAWER, pour chaque configuration d'indicateurs \(i_{m} \in
\mathcal{I}\) :
</p>
\begin{equation}
\label{orgb4832d7}
\text{PAWER}(\alpha, k | i_{m}) =  \text{AWER}(\alpha, k | i_{m}) - \text{AWER}(\alpha, k | \varnothing),
\end{equation}

<p>
L'interprétation des scores AWER et PAWER est analogue à celle des scores WER et PWER. La différence
provient du fait d'imposer une distribution des risques entre la prise de profit et le contrôle des
pertes. Autrement dit, si on décide d'évaluer un indicateur en supposant une prise de profit faible
mais fréquente (i.e. \(\alpha\) proche de 0) alors les pertes pourront être importantes mais rares
(i.e. \(\beta\) proche de 1). En fixant \(\alpha = 0.5\), on considère un risque équilibré entre perte
et profit. 
</p>
</div>
</div>

<div id="outline-container-méthodologie-générale" class="outline-2">
<h2 id="méthodologie-générale"><span class="section-number-2">5.</span> Méthodologie d'évaluation</h2>
<div class="outline-text-2" id="text-méthodologie-générale">
<p>
Dans cette section, nous proposons une méthodologie d'évaluation d'indicateurs reposant sur le score
AWER. Les différents termes du score sont évalués de manière empirique à partir d'un historique de
données sur l'actif étudié.
</p>

<p>
Soit un indicateur \(I\) à valeurs dans \(\mathcal{I} = \{i_{1}, \ldots, i_{M}\}\), le protocole
d'évaluation se déroule de la manière suivante :
</p>
<ol class="org-ol">
<li>Collecter des données historiques :
<ul class="org-ul">
<li>Sélection de l'actif étudié, e.g. BTC/USDC.</li>
<li>Choisir la période d'échantillonnage \(\Delta t\) considérée. En fonction des stratégies, \(\Delta
     t\) peut être plus ou moins grand, e.g. 1 min, 5 min, 1 heure, 1 journée, 1 semaine, etc.</li>
</ul></li>
<li>Fixer un horizon \(k \ge 0\) définissant le temps maximum de conservation de l'actif avant sa vente
au prix du marché.</li>
<li>Fixer le niveau de risque \(\alpha\) de la stratégie d'investissement de référence utilisée de
manière sous-jacente par le score ACER.</li>
<li>Pour chaque configuration \(i_{m} \in \mathcal{I}\) de l'indicateur étudié :
<ol class="org-ol">
<li>Estimer les rendements à horizon \(p+k\) conditionnellement à l'observation de la configuration
\(i_{m}\) à la période \(p-1\) à partir des données historiques.</li>
<li>Estimer empiriquement le score AWER</li>
</ol></li>
</ol>
</div>
</div>


<div id="outline-container-orge1f0978" class="outline-2">
<h2 id="orge1f0978"><span class="section-number-2">6.</span> Références</h2>
<div class="outline-text-2" id="text-6">
<p>
<a href="MOSAIC.bib">MOSAIC.bib</a>
</p>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Notes de bas de page: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1" role="doc-backlink">1</a></sup> <div class="footpara" role="doc-footnote"><p class="footpara">Par opposition d'un investissement en vente à 
découvert (en anglais <i>short position</i>).</p></div></div>


</div>
</div></div>
</body>
</html>
